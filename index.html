<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Chat Fake WhatsApp (Sem Marca D'água)</title>
    <!-- Tailwind for Editor UI -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom CSS for Chat Preview -->
    <link rel="stylesheet" href="style.css">
    <!-- html2canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link href="https://fonts.googleapis.com/css2?family=Helvetica+Neue:wght@400;500;600&display=swap" rel="stylesheet">
</head>

<body class="bg-gray-100 font-sans h-screen flex flex-col overflow-hidden">

    <!-- Navbar -->
    <nav class="bg-emerald-600 text-white p-4 shadow-md flex justify-between items-center z-10">
        <div class="flex items-center gap-2">
            <i class="ph ph-whatsapp-logo text-3xl"></i>
            <h1 class="text-xl font-bold">ZapFake Generator</h1>
        </div>
        <button onclick="downloadImage()"
            class="bg-white text-emerald-600 px-4 py-2 rounded-lg font-bold hover:bg-emerald-50 transition flex items-center gap-2">
            <i class="ph ph-download-simple"></i> Baixar Imagem
        </button>
    </nav>

    <div class="flex flex-1 overflow-hidden">

        <!-- Editor View (Left) -->
        <aside class="w-1/3 min-w-[350px] bg-white border-r border-gray-200 overflow-y-auto p-6 shadow-xl z-20">

            <h2 class="text-lg font-bold text-gray-700 mb-4 border-b pb-2">Configurações do Topo</h2>

            <!-- Barra de Status -->
            <div class="space-y-4 mb-6">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-xs font-semibold text-gray-500 uppercase">Hora</label>
                        <input type="text" id="statusTime" value="14:20"
                            class="w-full border rounded p-2 focus:ring-2 focus:ring-emerald-500 outline-none">
                    </div>
                    <div>
                        <label class="text-xs font-semibold text-gray-500 uppercase">Bateria %</label>
                        <input type="number" id="batteryLevel" value="65"
                            class="w-full border rounded p-2 focus:ring-2 focus:ring-emerald-500 outline-none">
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-xs font-semibold text-gray-500 uppercase">Operadora</label>
                        <input type="text" id="carrierName" value="Vivo"
                            class="w-full border rounded p-2 focus:ring-2 focus:ring-emerald-500 outline-none">
                    </div>
                    <div>
                        <label class="text-xs font-semibold text-gray-500 uppercase">Sinal (1-4)</label>
                        <input type="range" id="signalStrength" min="1" max="4" value="3"
                            class="w-full h-8 accent-emerald-600">
                    </div>
                </div>
                <div>
                    <label class="text-xs font-semibold text-gray-500 uppercase">Mensagens Não Lidas</label>
                    <input type="number" id="unreadCountInput" value="2"
                        class="w-full border rounded p-2 focus:ring-2 focus:ring-emerald-500 outline-none">
                </div>
            </div>

            <h2 class="text-lg font-bold text-gray-700 mb-4 border-b pb-2">Perfil</h2>

            <!-- Perfil Info -->
            <div class="space-y-4 mb-6">
                <div class="flex items-center gap-4">
                    <div class="w-16 h-16 bg-gray-200 rounded-full overflow-hidden shrink-0 border">
                        <img id="profilePreviewInput" src="https://via.placeholder.com/150"
                            class="w-full h-full object-cover">
                    </div>
                    <div class="flex-1">
                        <label class="block text-xs font-semibold text-gray-500 uppercase mb-1">Foto de Perfil</label>
                        <input type="file" id="profilePhotoInput" accept="image/*"
                            class="text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100">
                    </div>
                </div>
                <div>
                    <label class="text-xs font-semibold text-gray-500 uppercase">Nome do Contato</label>
                    <input type="text" id="contactName" value="Amor ❤️"
                        class="w-full border rounded p-2 focus:ring-2 focus:ring-emerald-500 outline-none">
                </div>
                <div>
                    <label class="text-xs font-semibold text-gray-500 uppercase">Status (ex: online)</label>
                    <input type="text" id="contactStatus" value="online"
                        class="w-full border rounded p-2 focus:ring-2 focus:ring-emerald-500 outline-none">
                </div>
            </div>

            <h2 class="text-lg font-bold text-gray-700 mb-4 border-b pb-2">Adicionar Mensagem</h2>

            <!-- Message Inputs -->
            <div class="bg-gray-50 p-4 rounded-lg border space-y-3">
                <div class="flex gap-2 bg-white p-1 rounded-lg border">
                    <button onclick="setSender('receiver')" id="btnReceiver"
                        class="flex-1 py-1 px-3 rounded text-sm font-medium bg-emerald-100 text-emerald-800 border border-emerald-200">Recebida</button>
                    <button onclick="setSender('sender')" id="btnSender"
                        class="flex-1 py-1 px-3 rounded text-sm font-medium text-gray-600 hover:bg-gray-100">Enviada</button>
                </div>

                <!-- Message Type Selector -->
                <div class="flex gap-2 text-sm justify-center pb-2 border-b">
                    <label class="flex items-center gap-1 cursor-pointer">
                        <input type="radio" name="msgType" value="text" checked onchange="toggleMsgInput()">
                        <span>Texto</span>
                    </label>
                    <label class="flex items-center gap-1 cursor-pointer">
                        <input type="radio" name="msgType" value="image" onchange="toggleMsgInput()">
                        <span>Imagem</span>
                    </label>
                    <label class="flex items-center gap-1 cursor-pointer">
                        <input type="radio" name="msgType" value="audio" onchange="toggleMsgInput()"> <span>Áudio</span>
                    </label>
                </div>

                <!-- Text Input -->
                <div id="input-text" class="block">
                    <textarea id="msgContent" rows="3" placeholder="Digite a mensagem..."
                        class="w-full border rounded p-2 text-sm focus:ring-2 focus:ring-emerald-500 outline-none"></textarea>
                </div>

                <!-- Image Input -->
                <div id="input-image" class="hidden">
                    <label class="block mb-1 text-xs font-semibold uppercase text-gray-500">Enviar Imagem</label>
                    <input type="file" id="msgImageDetail" accept="image/*" class="w-full text-sm">
                    <textarea id="msgCaption" rows="1" placeholder="Legenda (opcional)..."
                        class="w-full border rounded p-2 text-sm mt-2 focus:ring-2 focus:ring-emerald-500 outline-none"></textarea>
                </div>

                <!-- Audio Input -->
                <div id="input-audio" class="hidden space-y-2">
                    <div class="grid grid-cols-2 gap-2">
                        <div>
                            <label class="text-xs font-semibold text-gray-500 uppercase">Duração (ex: 0:30)</label>
                            <input type="text" id="audioDuration" value="0:30"
                                class="w-full border rounded p-2 text-sm">
                        </div>
                        <div class="flex items-center gap-2">
                            <label class="flex items-center gap-1 text-sm"><input type="checkbox" id="audioPlayed"
                                    checked> Tocado (Azul)</label>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-2">
                    <input type="text" id="msgTime" value="14:21" class="border rounded p-2 text-sm">
                    <select id="msgStatus" class="border rounded p-2 text-sm">
                        <option value="none">Sem Tick</option>
                        <option value="sent">Enviado (1 cinza)</option>
                        <option value="delivered">Entregue (2 cinza)</option>
                        <option value="read" selected>Lido (2 azul)</option>
                    </select>
                </div>

                <button onclick="addMessage()"
                    class="w-full bg-emerald-600 text-white font-bold py-2 rounded shadow hover:bg-emerald-700 active:scale-95 transition">
                    Adicionar Conversa
                </button>
            </div>

            <div class="mt-8 text-center text-xs text-gray-400">
                <p>Arraste itens na prévia para reordenar (em breve)</p>
            </div>

        </aside>

        <!-- Preview Area (Right) -->
        <main class="flex-1 bg-gray-200 flex justify-center items-center p-8 relative overflow-hidden">
            <!-- Grid Pattern UI -->
            <div class="absolute inset-0 opacity-10 pointer-events-none"
                style="background-image: radial-gradient(#999 1px, transparent 1px); background-size: 20px 20px;"></div>

            <!-- Phone Container -->
            <div id="captureArea"
                class="relative bg-white w-[375px] h-[812px] shadow-2xl rounded-[40px] overflow-hidden border-[8px] border-gray-900 flex flex-col shrink-0 select-none">

                <!-- Status Bar -->
                <div
                    class="bg-[#F6F6F6] text-black px-6 pt-3 pb-1 flex justify-between items-end h-[44px] text-[15px] font-semibold tracking-wide relative z-20">
                    <div id="previewTime">14:20</div>
                    <div class="flex items-center gap-1.5 h-full">
                        <div class="flex items-end gap-[2px] h-[10px]">
                            <div id="sig1" class="w-[3px] h-[4px] bg-black rounded-[1px]"></div>
                            <div id="sig2" class="w-[3px] h-[6px] bg-black rounded-[1px]"></div>
                            <div id="sig3" class="w-[3px] h-[8px] bg-black rounded-[1px]"></div>
                            <div id="sig4" class="w-[3px] h-[10px] bg-gray-300 rounded-[1px]"></div>
                        </div>
                        <span class="text-[12px] font-bold ml-1">4G</span>
                        <div
                            class="w-6 h-3 border border-black/30 rounded-[3px] relative ml-1 flex items-center px-[1px]">
                            <div id="previewBattery" class="h-full bg-black rounded-[1px]" style="width: 65%;"></div>
                        </div>
                    </div>
                </div>

                <!-- WhatsApp Header -->
                <div
                    class="bg-[#F6F6F6] backdrop-blur-md border-b border-gray-300 bg-opacity-90 px-2 py-2 flex items-center justify-between z-20 h-[50px]">
                    <div class="flex items-center flex-1 min-w-0">
                        <button class="text-[#007AFF] px-1 flex items-center text-lg gap-1">
                            <i class="ph-bold ph-caret-left"></i>
                            <span id="unreadCountDisplay" class="text-[17px]">2</span>
                        </button>
                        <div class="flex items-center ml-1 flex-1 min-w-0">
                            <img id="previewProfilePic" src="https://via.placeholder.com/150"
                                class="w-9 h-9 rounded-full object-cover border border-gray-200 mr-2 shrink-0">
                            <div class="flex flex-col justify-center overflow-hidden">
                                <h3 id="previewName"
                                    class="font-semibold text-[16px] leading-tight truncate text-black">Amor ❤️</h3>
                                <p id="previewStatus" class="text-[12px] text-gray-500 leading-none mt-[2px] truncate">
                                    online</p>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center gap-5 pr-3 text-black text-xl">
                        <i class="ph ph-video-camera"></i>
                        <i class="ph ph-phone"></i>
                    </div>
                </div>

                <!-- Chat Area -->
                <div id="chatContainer" class="flex-1 overflow-y-auto bg-[#EFEFF4] p-3 space-y-2 relative">
                    <!-- Background Wallpaper -->
                    <div class="absolute inset-0 opacity-[0.9] pointer-events-none"
                        style="background-image: url('https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png'); background-size: cover; z-index: 0;">
                    </div>

                    <!-- Date Separator Example -->
                    <div
                        class="relative z-10 flex justify-center my-4 opacity-0 group hover:opacity-100 transition duration-200">
                        <span
                            class="bg-[#E1E4E8] text-gray-500 text-[11px] px-3 py-1 rounded-full font-medium shadow-sm uppercase tracking-wide">Hoje</span>
                    </div>

                    <!-- Messages will be injected here -->

                </div>

                <!-- Footer Input -->
                <div class="bg-[#F6F6F6] px-3 py-2 flex items-center gap-3 border-t border-gray-300 relative z-20 pb-6">
                    <i class="ph ph-plus text-[#007AFF] text-2xl"></i>
                    <div
                        class="flex-1 bg-white border border-gray-300 rounded-[18px] px-3 py-[6px] text-[16px] text-gray-400">

                    </div>
                    <div class="flex gap-4 text-[#007AFF] text-xl">
                        <i class="ph ph-camera"></i>
                        <i class="ph ph-microphone"></i>
                    </div>
                </div>

                <!-- Home Indicator -->
                <div class="absolute bottom-2 left-1/2 -translate-x-1/2 w-[130px] h-[5px] bg-black rounded-full z-30">
                </div>

            </div>
        </main>
    </div>

    <!-- Templates -->
    <template id="tpl-msg-sent">
        <div class="relative z-10 flex justify-end w-full group mb-1">
            <div
                class="bg-[#DCF8C5] rounded-l-2xl rounded-tr-lg rounded-br-2xl shadow-[0_1px_0.5px_rgba(0,0,0,0.13)] max-w-[75%] p-[6px] px-[9px] relative min-w-[80px]">
                <p
                    class="msg-text text-[16px] text-black leading-[1.3] pr-2 pb-[10px] break-words whitespace-pre-wrap font-regular">
                    Olá, tudo bem?</p>
                <div class="absolute bottom-[4px] right-[6px] flex items-center gap-[3px]">
                    <span class="msg-time text-[11px] text-[#3c6b45] opacity-70">14:20</span>
                    <span class="msg-status text-[14px]">
                        <!-- Read Icon -->
                        <svg class="w-[14px] h-[14px] text-[#34B7F1]" viewBox="0 0 16 11" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M11.3 6.4L15.3 2.4C15.7 2 15.7 1.4 15.3 1L14.6 0.3C14.2 -0.1 13.6 -0.1 13.2 0.3L9.6 3.9C9.4 4.1 9.3 4.4 9.4 4.7C9.2 4.6 8.9 4.6 8.7 4.8L8.6 4.9C8.2 5.3 8.2 5.9 8.6 6.3L11.3 9L11.3 6.4Z"
                                fill="currentColor" />
                            <path
                                d="M4.6 6.4L8.6 2.4C9 2 9 1.4 8.6 1L7.9 0.3C7.5 -0.1 6.9 -0.1 6.5 0.3L0.9 5.9C0.5 6.3 0.5 6.9 0.9 7.3L3.6 10C4 10.4 4.6 10.4 5 10L5.7 9.3C6.1 8.9 6.1 8.3 5.7 7.9L4.6 6.8V6.4Z"
                                fill="currentColor" />
                        </svg>
                    </span>
                </div>
            </div>
            <!-- Delete Action (Hover) -->
            <button
                class="delete-btn absolute -right-8 top-0 text-red-500 opacity-0 group-hover:opacity-100 p-1 hover:bg-red-50 rounded">
                <i class="ph-fill ph-trash"></i>
            </button>
        </div>
    </template>

    <template id="tpl-msg-received">
        <div class="relative z-10 flex justify-start w-full group mb-1">
            <div
                class="bg-white rounded-r-2xl rounded-tl-lg rounded-bl-2xl shadow-[0_1px_0.5px_rgba(0,0,0,0.13)] max-w-[75%] p-[6px] px-[9px] relative min-w-[70px]">
                <p
                    class="msg-text text-[16px] text-black leading-[1.3] pr-2 pb-[14px] break-words whitespace-pre-wrap font-regular">
                    Oi! Tudo certo por aqui e com você?</p>
                <div class="absolute bottom-[4px] right-[8px] flex items-center">
                    <span class="msg-time text-[11px] text-gray-400">14:21</span>
                </div>
            </div>
            <!-- Delete Action (Hover) -->
            <button
                class="delete-btn absolute -left-8 top-0 text-red-500 opacity-0 group-hover:opacity-100 p-1 hover:bg-red-50 rounded">
                <i class="ph-fill ph-trash"></i>
            </button>
        </div>
    </template>

    <template id="tpl-msg-image-sent">
        <div class="relative z-10 flex justify-end w-full group mb-1">
            <div
                class="bg-[#DCF8C5] rounded-l-2xl rounded-tr-lg rounded-br-2xl shadow-[0_1px_0.5px_rgba(0,0,0,0.13)] p-[3px] relative max-w-[75%]">
                <div class="rounded-lg overflow-hidden relative">
                    <img class="msg-image w-full h-auto object-cover max-h-[300px]" src="">
                    <div class="absolute inset-0 bg-black/5 pointer-events-none"></div>
                </div>
                <!-- Caption (Optional) -->
                <p
                    class="msg-caption hidden text-[16px] text-black leading-[1.3] px-1 pt-1 pb-[14px] break-words whitespace-pre-wrap">
                </p>

                <div class="absolute bottom-[4px] right-[6px] flex items-center gap-[3px] z-10 drop-shadow-md">
                    <span class="msg-time text-[11px] text-white/90">14:20</span>
                    <span class="msg-status text-[14px] text-white drop-shadow-sm"></span>
                </div>
            </div>
            <button
                class="delete-btn absolute -right-8 top-0 text-red-500 opacity-0 group-hover:opacity-100 p-1 hover:bg-red-50 rounded">
                <i class="ph-fill ph-trash"></i>
            </button>
        </div>
    </template>

    <template id="tpl-msg-image-received">
        <div class="relative z-10 flex justify-start w-full group mb-1">
            <div
                class="bg-white rounded-r-2xl rounded-tl-lg rounded-bl-2xl shadow-[0_1px_0.5px_rgba(0,0,0,0.13)] p-[3px] relative max-w-[75%]">
                <div class="rounded-lg overflow-hidden relative">
                    <img class="msg-image w-full h-auto object-cover max-h-[300px]" src="">
                </div>
                <!-- Caption (Optional) -->
                <p
                    class="msg-caption hidden text-[16px] text-black leading-[1.3] px-1 pt-1 pb-[14px] break-words whitespace-pre-wrap">
                </p>

                <div class="absolute bottom-[4px] right-[8px] flex items-center z-10 drop-shadow-md">
                    <span class="msg-time text-[11px] text-white/90">14:21</span>
                </div>
            </div>
            <button
                class="delete-btn absolute -left-8 top-0 text-red-500 opacity-0 group-hover:opacity-100 p-1 hover:bg-red-50 rounded">
                <i class="ph-fill ph-trash"></i>
            </button>
        </div>
    </template>

    <template id="tpl-msg-audio-sent">
        <div class="relative z-10 flex justify-end w-full group mb-1">
            <div
                class="bg-[#DCF8C5] rounded-l-2xl rounded-tr-lg rounded-br-2xl shadow-[0_1px_0.5px_rgba(0,0,0,0.13)] relative min-w-[260px] p-2 flex items-center gap-3">
                <!-- Sender Profile Pic (Small for audio in some versions, or Microphone) -->
                <!-- Actually WhatsApp iOS Sent Audio just has play button and waveform -->
                <div class="relative w-10 h-10 flex items-center justify-center shrink-0">
                    <div class="absolute inset-0 bg-[#A3C68C] rounded-full opacity-30"></div>
                    <i class="ph-fill ph-microphone text-[#57943F] text-xl"></i>
                    <div class="absolute -bottom-1 -right-1">
                        <i class="ph-fill ph-microphone text-[#A3C68C] text-[10px] hidden"></i>
                    </div>
                </div>

                <div class="flex-1 flex flex-col justify-center h-10">
                    <div class="h-[3px] bg-[#B9D8A6] rounded-full w-full relative overflow-hidden">
                        <div class="absolute left-0 top-0 h-full bg-[#57943F] w-[0%]"></div> <!-- Progress -->
                    </div>
                    <div class="flex justify-between text-[11px] text-gray-500 mt-1">
                        <span class="audio-duration">0:30</span>
                    </div>
                </div>

                <!-- Profile Pic usually on left for received. For sent, it's just the waveform usually. -->
                <!-- Let's stick to a generic "Play" look for simplicity or mimic user request. -->

                <div class="absolute bottom-[4px] right-[6px] flex items-center gap-[3px]">
                    <span class="msg-time text-[11px] text-[#3c6b45] opacity-70">14:44</span>
                    <span class="msg-status text-[14px]"></span>
                </div>
            </div>
            <button
                class="delete-btn absolute -right-8 top-0 text-red-500 opacity-0 group-hover:opacity-100 p-1 hover:bg-red-50 rounded">
                <i class="ph-fill ph-trash"></i>
            </button>
        </div>
    </template>

    <template id="tpl-msg-audio-received">
        <div class="relative z-10 flex justify-start w-full group mb-1">
            <div
                class="bg-white rounded-r-2xl rounded-tl-lg rounded-bl-2xl shadow-[0_1px_0.5px_rgba(0,0,0,0.13)] relative min-w-[260px] p-[9px] flex items-center gap-3 pl-[12px]">
                <!-- Profile Pic Circle -->
                <div class="relative shrink-0">
                    <img class="audio-profile w-[46px] h-[46px] rounded-full object-cover"
                        src="https://via.placeholder.com/50">
                    <div class="absolute bottom-0 right-0 text-[#999999]">
                        <i class="ph-fill ph-microphone text-lg drop-shadow-sm filter stroke-white stroke-2"></i>
                    </div>
                </div>

                <!-- Player Controls -->
                <div class="flex flex-col flex-1 gap-1">
                    <div class="flex items-center gap-2">
                        <i class="ph-fill ph-play text-gray-500 text-2xl"></i>
                        <div class="h-[24px] flex items-center flex-1 gap-[2px] opacity-40 grayscale">
                            <!-- Fake Waveform -->
                            <div class="w-[3px] h-[10px] bg-gray-400 rounded-full"></div>
                            <div class="w-[3px] h-[16px] bg-gray-400 rounded-full"></div>
                            <div class="w-[3px] h-[8px] bg-gray-400 rounded-full"></div>
                            <div class="w-[3px] h-[20px] bg-gray-400 rounded-full"></div>
                            <div class="w-[3px] h-[12px] bg-gray-400 rounded-full"></div>
                            <div class="w-[3px] h-[10px] bg-gray-400 rounded-full"></div>
                            <div class="w-[3px] h-[18px] bg-gray-400 rounded-full"></div>
                            <div class="w-[3px] h-[14px] bg-gray-400 rounded-full"></div>
                            <div class="w-[3px] h-[6px] bg-gray-400 rounded-full"></div>
                        </div>
                    </div>
                    <span class="audio-duration text-[11px] text-gray-500 pl-1">0:30</span>
                </div>

                <div class="absolute bottom-[4px] right-[8px] flex items-center">
                    <span class="msg-time text-[11px] text-gray-400">14:21</span>
                </div>
            </div>
            <button
                class="delete-btn absolute -left-8 top-0 text-red-500 opacity-0 group-hover:opacity-100 p-1 hover:bg-red-50 rounded">
                <i class="ph-fill ph-trash"></i>
            </button>
        </div>
    </template>

    <script src="script.js"></script>
</body>

</html>